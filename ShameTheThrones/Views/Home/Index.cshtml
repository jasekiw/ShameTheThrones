
@{
    ViewBag.Title = "Shame The Thrones!";
    ViewBag.NavbarTab = "Home";
}
<div class="row spaced">
    <div class="col-xs-12" id="homeGreeting">
        Welcome to ShameTheThrones, to start rating public restrooms please log in.
    </div>
</div>
<div class="row spaced homeSearch">
    <div class="col-xs-12">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="start typing a zip code...">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button">Go!</button>
            </span>
        </div><!-- /input-group -->
    </div><!-- /.col-lg-6 -->
</div>
<div class="row">
    <div class="col-xs-12">
        <ul class="list-group searchResults"></ul>
    </div>
</div>


@section Scripts
{
    <script type="text/javascript">
        $(".homeSearch .form-control").on("keyup", function(event) {
            var target = $(event.currentTarget);
            var value = target.val();
            var template = '<li class="list-group-item result">[content]</li>';
//            $.get("/bathrooms/search/zip/" + value, function (obj) { // stub for the ajax request to search for bathrooms
//
//            });
            var results = [
                { title: "test result 1", link: "#"},
                { title: "test result 1", link: "#"},
                { title: "test result 1", link: "#" },
                { title: value, link: "#" }
            ];
            
            if (value.length >= 3) {
                var resultsSection = $(".searchResults");
                resultsSection.html("");
                results.forEach(function (obj) {
                    var rateButton = '<a href="#" type="button" class="btn btn-default rate-button">Rate</button>';
                    var toAdd = template.replace("[content]", '<a class="bathroom" href="' + obj.link + '">' + obj.title + '</a>' + rateButton);
                    resultsSection.append($(toAdd));
                });
            }
        });
      

    </script>
}